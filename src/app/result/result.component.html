<div [ngClass]="{'fullscreen': this.fullscreen}" class="resultcontent">
  <div class="criteria">
    <div class="inner" *ngIf="!this.fullscreen">
      <mat-slide-toggle *ngIf="!isMobileLayout" [checked]="advanced" (change)="advanced = $event.checked">Advanced options</mat-slide-toggle>
      <div class="searchqueries">
        <div class="searchquery" *ngFor="let searchquery of searchqueries; let i = index">
          <h2>Query {{i+1}}</h2>
          <i (click)="deletequery(i)" class="fas fa-trash-alt delete continuous smallbutton"></i>
          <app-autocomplete [initialValue]="searchquery.topic" (selectedoption)="topicselected(searchquery, i, $event)"
            [multiselect]="false" [options]="topicoptions" [placeholder]="'Topic'"></app-autocomplete>
          <app-autocomplete [initialValue]="searchquery.geography" (selectedoption)="searchquery.geography = $event"
            [multiselect]="true" [options]="geographies" [placeholder]="'Geography'"></app-autocomplete>
          <app-autocomplete [initialValue]="searchquery.newspaper" (selectedoption)="searchquery.newspaper = $event"
            [multiselect]="true" [options]="newspapers" [placeholder]="'Newspapers'"></app-autocomplete>
          <!-- time range -->
        </div>
        <button mat-button class="card add"
          (click)="searchqueries.push({data: undefined,topic: undefined,geography: undefined,newspaper: undefined})">
          <i class="fas fa-plus"></i>
          Add search query
        </button>
      </div>
    </div>
  </div>
  <div class="slidecolumn">
    <i class="fas fa-chevron-left" (click)="fullscreentoggle()"></i>
  </div>
  <div class="spacer"></div>
  <div class="result">
    <mat-tab-group *ngIf="true" animationDuration="200ms" dynamicHeight [(selectedIndex)]="tabindex" (selectedTabChange)="tabChanged($event)">
      <mat-tab label="Line Chart">
        <div class="wrapper" [ngClass]="{'onlyone': searchqueries.length === 1}">
          <div class="perquery" *ngFor="let searchquery of searchqueries; let i = index">
            <h2>Line chart query {{i+1}}</h2>
            <button mat-button>Export data</button>
            <div class="linechart">
                <div id="chartdiv_{{i}}"></div>
            </div>
          </div>
          <p *ngIf="searchqueries.length == 0">
            No search queries added (yet), add one on the left.
          </p>
        </div>
      </mat-tab>
      <mat-tab label="Map Plot">
        <div class="wrapper" [ngClass]="{'onlyone': searchqueries.length === 1}">
          <div class="perquery" *ngFor="let searchquery of searchqueries; let i = index">
            <h2>Map query {{i+1}}</h2>
            <button mat-button>Export data</button>
          </div>
          <p *ngIf="searchqueries.length == 0">
            No search queries added (yet), add one on the left.
          </p>
        </div>
      </mat-tab>
      <mat-tab label="Underlying data" *ngIf="advanced && !isMobileLayout">
        <div class="wrapper" [ngClass]="{'onlyone': searchqueries.length === 1}">
          <div class="perquery" *ngFor="let searchquery of searchqueries; let i = index">
            <h2>Data query {{i+1}}</h2>
            <button mat-button>Export data</button>

            <!-- <mat-form-field>
            <mat-label>Filter</mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Eg. Nederlands Dagblad" #input>
          </mat-form-field> -->
            <div class="tableparent">
              <table class="table" mat-table [dataSource]="searchquery.data">
                <ng-container matColumnDef="newspaper_publisher">
                  <th mat-header-cell *matHeaderCellDef> newspaper publisher</th>
                  <td mat-cell *matCellDef="let element">{{element.newspaper_publisher}}</td>
                </ng-container>
                <ng-container matColumnDef="newspaper_city">
                  <th mat-header-cell *matHeaderCellDef> newspaper city</th>
                  <td mat-cell *matCellDef="let element">{{element.newspaper_city}}</td>
                </ng-container>
                <ng-container matColumnDef="newspaper_date">
                  <th mat-header-cell *matHeaderCellDef> newspaper date</th>
                  <td mat-cell *matCellDef="let element">{{element.newspaper_date}}</td>
                </ng-container>
                <ng-container matColumnDef="sentiment">
                  <th mat-header-cell *matHeaderCellDef> sentiment</th>
                  <td mat-cell *matCellDef="let element">{{element.sentiment}}</td>
                </ng-container>
                <ng-container matColumnDef="sentimentscore">
                  <th mat-header-cell *matHeaderCellDef> sentimentscore</th>
                  <td mat-cell *matCellDef="let element">{{element.sentimentscore}}</td>
                </ng-container>

                <tr mat-header-row
                  *matHeaderRowDef="['newspaper_publisher', 'newspaper_city', 'newspaper_date', 'sentiment', 'sentimentscore']; sticky: true">
                </tr>

                <tr mat-row
                  *matRowDef="let row; columns: ['newspaper_publisher', 'newspaper_city', 'newspaper_date', 'sentiment', 'sentimentscore']">
                </tr>

              </table>
            </div>
          </div>
          <p *ngIf="searchqueries.length == 0">
            No search queries added (yet), add one on the left.
          </p>
        </div>
      </mat-tab>
    </mat-tab-group>


  </div>
</div>
